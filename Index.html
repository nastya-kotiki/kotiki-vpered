<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ç–∏–∫–∏ –í–ø–µ—Ä–µ–¥!</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #a7e3ff;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            background: url('golf_field.png') no-repeat center center;
            background-size: cover;
            cursor: pointer;
        }
        #gameInfo {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 10px;
            font-size: 16px;
            max-width: 300px;
            z-index: 100;
        }
        
        #instructions {
            font-weight: bold;
            color: #FF6B6B;
        }
        #successMessage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            font-size: 24px;
            text-align: center;
            display: none;
        }
        .hole-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
        }
        .selected {
            background-color: rgba(255, 165, 0, 0.8);
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <div id="gameInfo">
        <p>üê± <strong>–ö–æ—Ç–∏–∫–∏ –í–ø–µ—Ä–µ–¥!</strong> üê±</p>
        <div id="instructions">
            <p>1. –í—ã–±–µ—Ä–∏—Ç–µ –ª—É–Ω–∫—É, –Ω–∞–∂–∞–≤ –Ω–∞ –Ω–µ—ë</p>
            <p>2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∫–æ—Ç–∏–∫–∞, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∏–ª—É —É–¥–∞—Ä–∞</p>
            <p>3. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –º—ã—à—å –¥–ª—è —É–¥–∞—Ä–∞!</p>
            <p>‚ö†Ô∏è –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ª—É–Ω–∫—É –¥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è!</p>
        </div>
        <p id="selectedHole">–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª—É–Ω–∫–∞: –ù–µ—Ç</p>
        <p id="shotInfo">–°–¥–µ–ª–∞–Ω–æ —É–¥–∞—Ä–æ–≤: 0</p>
    </div>
    <div id="successMessage">
        <p>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</p>
        <p>–ö–æ—Ç–∏–∫ –ø–æ–ø–∞–ª –≤ –ª—É–Ω–∫—É!</p>
        <button id="playAgain">–°–ª–µ–¥—É—é—â–∏–π —É–¥–∞—Ä</button>
        <button id="newGame">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const successMessage = document.getElementById("successMessage");
        const playAgainButton = document.getElementById("playAgain");
        const selectedHoleText = document.getElementById("selectedHole");
        const shotInfoText = document.getElementById("shotInfo");
        
        // –°—á–µ—Ç—á–∏–∫ —É–¥–∞—Ä–æ–≤
        let shotCount = 0;
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –∫–æ—Ç–∏–∫–∞ (–º—è—á–∞)
        const cat = {
            x: 100,
            y: canvas.height - 100,
            radius: 25,
            color: "orange",
            dx: 0,
            dy: 0,
            speed: 0,
            angle: 0,
            isDragging: false,
            isMoving: false,
            startX: 0,
            startY: 0,
            image: new Image()
        };
        cat.image.src = 'cat_ball.png'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ç–∏–∫–∞
        
        // –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∫—Ä—É–≥
        cat.image.onerror = function() {
            cat.useImage = false;
        };
        cat.image.onload = function() {
            cat.useImage = true;
        };

        // –°–æ–∑–¥–∞–µ–º –ª—É–Ω–∫–∏
        const holes = [
            { id: 1, x: canvas.width * 0.2, y: canvas.height * 0.2, radius: 30, probability: 0.7 },
            { id: 2, x: canvas.width * 0.5, y: canvas.height * 0.1, radius: 30, probability: 0.5 },
            { id: 3, x: canvas.width * 0.8, y: canvas.height * 0.2, radius: 30, probability: 0.8 },
            { id: 4, x: canvas.width * 0.3, y: canvas.height * 0.4, radius: 30, probability: 0.6 },
            { id: 5, x: canvas.width * 0.7, y: canvas.height * 0.5, radius: 30, probability: 0.4 },
            { id: 6, x: canvas.width * 0.5, y: canvas.height * 0.3, radius: 30, probability: 0.65 }
        ];

        // –í—ã–±—Ä–∞–Ω–Ω–∞—è –ª—É–Ω–∫–∞
        let selectedHole = null;
        
        // –°–æ–∑–¥–∞–µ–º HTML-–º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –ª—É–Ω–æ–∫
        function createHoleMarkers() {
            // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä–∫–µ—Ä—ã
            document.querySelectorAll('.hole-marker').forEach(marker => marker.remove());
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π –ª—É–Ω–∫–∏
            holes.forEach(hole => {
                const marker = document.createElement('div');
                marker.className = 'hole-marker';
                marker.textContent = hole.id;
                marker.style.left = `${hole.x}px`;
                marker.style.top = `${hole.y}px`;
                marker.addEventListener('click', () => selectHole(hole));
                document.body.appendChild(marker);
            });
        }
        
        // –í—ã–±–æ—Ä –ª—É–Ω–∫–∏
        function selectHole(hole) {
            // –ï—Å–ª–∏ –ª—É–Ω–∫–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞ –∏ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞, –Ω–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é
            if (selectedHole && !holeCompleted && selectedHole.id !== hole.id) {
                alert("–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø–æ–ø–∞—Å—Ç—å –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ª—É–Ω–∫—É!");
                return;
            }
            
            selectedHole = hole;
            selectedHoleText.textContent = `–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª—É–Ω–∫–∞: ${hole.id}`;
            holeCompleted = false;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –º–∞—Ä–∫–µ—Ä–æ–≤
            document.querySelectorAll('.hole-marker').forEach(marker => {
                if (parseInt(marker.textContent) === hole.id) {
                    marker.classList.add('selected');
                } else {
                    marker.classList.remove('selected');
                }
            });
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥—Ä—É–≥–∏–µ –º–∞—Ä–∫–µ—Ä—ã –ª—É–Ω–æ–∫ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
            if (!holeCompleted) {
                document.querySelectorAll('.hole-marker').forEach(marker => {
                    if (parseInt(marker.textContent) !== hole.id) {
                        marker.style.pointerEvents = 'none';
                        marker.style.opacity = '0.5';
                    }
                });
            }
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞—Ä–∞
            cat.dx = 0;
            cat.dy = 0;
            cat.speed = 0;
            cat.angle = 0;
            cat.isDragging = false;
            cat.isMoving = false;
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            successMessage.style.display = 'none';
            
            // –ò–≥—Ä–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –ª—É–Ω–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
            // –∏ –∫–æ—Ç–∏–∫ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–∞–º, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
        }
        
        // –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∏–≥—Ä—ã (–¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã)
        function fullReset() {
            cat.x = 100;
            cat.y = canvas.height - 100;
            cat.dx = 0;
            cat.dy = 0;
            cat.speed = 0;
            cat.angle = 0;
            cat.isDragging = false;
            cat.isMoving = false;
            selectedHole = null;
            holeCompleted = false;
            shotCount = 0;
            selectedHoleText.textContent = "–í—ã–±—Ä–∞–Ω–Ω–∞—è –ª—É–Ω–∫–∞: –ù–µ—Ç";
            shotInfoText.textContent = "–°–¥–µ–ª–∞–Ω–æ —É–¥–∞—Ä–æ–≤: 0";
            successMessage.style.display = 'none';
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –≤—Å–µ –ª—É–Ω–∫–∏
            document.querySelectorAll('.hole-marker').forEach(marker => {
                marker.classList.remove('selected');
                marker.style.pointerEvents = 'auto';
                marker.style.opacity = '1';
            });
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ç–∏–∫–∞ (–º—è—á–∞)
        function drawCat() {
            if (cat.useImage && cat.image.complete) {
                ctx.save();
                ctx.translate(cat.x, cat.y);
                ctx.drawImage(cat.image, -cat.radius, -cat.radius, cat.radius * 2, cat.radius * 2);
                ctx.restore();
            } else {
                ctx.beginPath();
                ctx.arc(cat.x, cat.y, cat.radius, 0, Math.PI * 2);
                ctx.fillStyle = cat.color;
                ctx.fill();
                ctx.closePath();
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª—É–Ω–æ–∫
        function drawHoles() {
            holes.forEach(hole => {
                ctx.beginPath();
                ctx.arc(hole.x, hole.y, hole.radius, 0, Math.PI * 2);
                ctx.fillStyle = selectedHole && selectedHole.id === hole.id ? 'rgba(255, 165, 0, 0.5)' : 'rgba(0, 0, 0, 0.3)';
                ctx.fill();
                ctx.closePath();
                
                // –†–∏—Å—É–µ–º –Ω–æ–º–µ—Ä –ª—É–Ω–∫–∏
                ctx.fillStyle = 'white';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(hole.id.toString(), hole.x, hole.y + 7);
            });
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ —Å —É—á–µ—Ç–æ–º –æ—Ç—Å–∫–æ–∫–æ–≤ –æ—Ç —Å—Ç–µ–Ω
        function drawTrajectory() {
            if (cat.isDragging) {
                // –†–∞—Å—á–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Å–∏–ª—ã
                const dx = cat.startX - cat.x;
                const dy = cat.startY - cat.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx);
                const power = Math.min(distance / 5, 20);
                
                // –°–∏–º—É–ª—è—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
                let simX = cat.startX;
                let simY = cat.startY;
                let simAngle = angle;
                let simSpeed = power;
                let maxPoints = 50; // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫
                
                ctx.beginPath();
                ctx.moveTo(simX, simY);
                ctx.setLineDash([5, 5]);
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –æ—Ç—Å–∫–æ–∫–∏ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
                for (let i = 0; i < maxPoints && simSpeed > 0.5; i++) {
                    // –†–∞—Å—á–µ—Ç —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
                    let nextX = simX + Math.cos(simAngle) * simSpeed * 3;
                    let nextY = simY + Math.sin(simAngle) * simSpeed * 3;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å–∫–æ–∫–∞ –æ—Ç —Å—Ç–µ–Ω
                    if (nextX < cat.radius) {
                        nextX = cat.radius;
                        simAngle = Math.PI - simAngle;
                    }
                    if (nextX > canvas.width - cat.radius) {
                        nextX = canvas.width - cat.radius;
                        simAngle = Math.PI - simAngle;
                    }
                    if (nextY < cat.radius) {
                        nextY = cat.radius;
                        simAngle = -simAngle;
                    }
                    if (nextY > canvas.height - cat.radius) {
                        nextY = canvas.height - cat.radius;
                        simAngle = -simAngle;
                    }
                    
                    // –†–∏—Å—É–µ–º –ª–∏–Ω–∏—é
                    ctx.lineTo(nextX, nextY);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
                    simX = nextX;
                    simY = nextY;
                    simSpeed *= 0.95; // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
                }
                
                ctx.stroke();
                ctx.setLineDash([]);
                
                // –†–∏—Å—É–µ–º —Å—Ç—Ä–µ–ª–∫—É –¥–ª—è —Å–∏–ª—ã —É–¥–∞—Ä–∞
                const powerLine = Math.min(distance, 100);
                ctx.beginPath();
                ctx.moveTo(cat.startX, cat.startY);
                ctx.lineTo(
                    cat.startX + Math.cos(angle) * powerLine,
                    cat.startY + Math.sin(angle) * powerLine
                );
                ctx.strokeStyle = 'red';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–ª—ã
                const powerText = Math.round(power * 5) + '%';
                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(powerText, 
                    cat.startX + Math.cos(angle) * (powerLine + 20),
                    cat.startY + Math.sin(angle) * (powerLine + 20));
            }
        }

        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        let holeCompleted = false;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –ª—É–Ω–∫—É
        function checkHoleCollision() {
            if (!selectedHole || !cat.isMoving) return;
            
            const dx = cat.x - selectedHole.x;
            const dy = cat.y - selectedHole.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < selectedHole.radius) {
                // –°–ª—É—á–∞–π–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è
                if (Math.random() < selectedHole.probability) {
                    cat.isMoving = false;
                    holeCompleted = true;
                    successMessage.style.display = 'block';
                    
                    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –º–∞—Ä–∫–µ—Ä—ã –ª—É–Ω–æ–∫
                    document.querySelectorAll('.hole-marker').forEach(marker => {
                        marker.style.pointerEvents = 'auto';
                        marker.style.opacity = '1';
                    });
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (cat.isMoving) {
                // –§–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–µ–Ω–∏–µ)
                cat.speed *= 0.98;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫–æ—Ç–∏–∫–∞
                cat.x += Math.cos(cat.angle) * cat.speed;
                cat.y += Math.sin(cat.angle) * cat.speed;
                
                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –º–∞–ª–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
                if (cat.speed < 0.1) {
                    cat.isMoving = false;
                    cat.speed = 0;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏
                if (cat.x < cat.radius) {
                    cat.x = cat.radius;
                    cat.angle = Math.PI - cat.angle;
                }
                if (cat.x > canvas.width - cat.radius) {
                    cat.x = canvas.width - cat.radius;
                    cat.angle = Math.PI - cat.angle;
                }
                if (cat.y < cat.radius) {
                    cat.y = cat.radius;
                    cat.angle = -cat.angle;
                }
                if (cat.y > canvas.height - cat.radius) {
                    cat.y = canvas.height - cat.radius;
                    cat.angle = -cat.angle;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –ª—É–Ω–∫—É
                checkHoleCollision();
            }
            
            drawHoles();
            drawCat();
            drawTrajectory();
            
            requestAnimationFrame(update);
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        canvas.addEventListener("mousedown", (e) => {
            if (cat.isMoving) return;
            
            const dist = Math.sqrt((e.clientX - cat.x) ** 2 + (e.clientY - cat.y) ** 2);
            if (dist < cat.radius) {
                cat.isDragging = true;
                cat.startX = cat.x;
                cat.startY = cat.y;
            }
        });

        canvas.addEventListener("mousemove", (e) => {
            if (cat.isDragging) {
                cat.x = e.clientX;
                cat.y = e.clientY;
            }
        });

        canvas.addEventListener("mouseup", () => {
            if (cat.isDragging) {
                cat.isDragging = false;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∏–ª—É –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞—Ä–∞
                const dx = cat.startX - cat.x;
                const dy = cat.startY - cat.y;
                cat.angle = Math.atan2(dy, dx);
                
                // –°–∏–ª–∞ —É–¥–∞—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                const distance = Math.sqrt(dx * dx + dy * dy);
                cat.speed = Math.min(distance / 5, 20);
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ—Ç–∏–∫–∞ –≤ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —É–¥–∞—Ä–∞
                cat.x = cat.startX;
                cat.y = cat.startY;
                
                // –ù–∞—á–∏–Ω–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –ª—É–Ω–∫–∞
                if (selectedHole && cat.speed > 0.5) {
                    cat.isMoving = true;
                    shotCount++;
                    shotInfoText.textContent = `–°–¥–µ–ª–∞–Ω–æ —É–¥–∞—Ä–æ–≤: ${shotCount}`;
                }
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
        canvas.addEventListener("touchstart", (e) => {
            e.preventDefault();
            if (cat.isMoving) return;
            
            const touch = e.touches[0];
            const dist = Math.sqrt((touch.clientX - cat.x) ** 2 + (touch.clientY - cat.y) ** 2);
            if (dist < cat.radius) {
                cat.isDragging = true;
                cat.startX = cat.x;
                cat.startY = cat.y;
            }
        });

        canvas.addEventListener("touchmove", (e) => {
            e.preventDefault();
            if (cat.isDragging) {
                const touch = e.touches[0];
                cat.x = touch.clientX;
                cat.y = touch.clientY;
            }
        });

        canvas.addEventListener("touchend", (e) => {
            e.preventDefault();
            if (cat.isDragging) {
                cat.isDragging = false;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∏–ª—É –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞—Ä–∞
                const dx = cat.startX - cat.x;
                const dy = cat.startY - cat.y;
                cat.angle = Math.atan2(dy, dx);
                
                // –°–∏–ª–∞ —É–¥–∞—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                const distance = Math.sqrt(dx * dx + dy * dy);
                cat.speed = Math.min(distance / 5, 20);
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ—Ç–∏–∫–∞ –≤ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —É–¥–∞—Ä–∞
                cat.x = cat.startX;
                cat.y = cat.startY;
                
                // –ù–∞—á–∏–Ω–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –ª—É–Ω–∫–∞
                if (selectedHole && cat.speed > 0.5) {
                    cat.isMoving = true;
                }
            }
        });

        // –ö–Ω–æ–ø–∫–∞ "–°–ª–µ–¥—É—é—â–∏–π —É–¥–∞—Ä"
        playAgainButton.addEventListener("click", resetGame);
        
        // –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤–∞—è –∏–≥—Ä–∞"
        const newGameButton = document.getElementById("newGame");
        newGameButton.addEventListener("click", fullReset);

        // –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã –ª—É–Ω–æ–∫ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
        createHoleMarkers();
        update();
    </script>
</body>
</html>